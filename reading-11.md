# F Core in an ASP.NET MVC web app

### See the following link for tutorial (too much info to write down, but good for reference): https://docs.microsoft.com/en-us/aspnet/core/data/ef-mvc/intro?view=aspnetcore-3.1

### Entity Framework Core

##### It is a lightweight, extensible, open source and cross-platform version of the Entity Framework data access technology.
##### With EF Core, data access is performed using a model.
##### Example:
using Microsoft.EntityFrameworkCore;
using System.Collections.Generic;


    public class BloggingContext : DbContext
    {
        public DbSet<Blog> Blogs { get; set; }
        public DbSet<Post> Posts { get; set; }

        protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
        {
            optionsBuilder.UseSqlServer(
                @"Server=(localdb)\mssqllocaldb;Database=Blogging;Integrated Security=True");
        }
    }

    public class Blog
    {
        public int BlogId { get; set; }
        public string Url { get; set; }
        public int Rating { get; set; }
        public List<Post> Posts { get; set; }
    }

    public class Post
    {
        public int PostId { get; set; }
        public string Title { get; set; }
        public string Content { get; set; }

        public int BlogId { get; set; }
        public Blog Blog { get; set; }
    }

##### Quereying Example:
using (var db = new BloggingContext())
{
    var blogs = db.Blogs
        .Where(b => b.Rating > 3)
        .OrderBy(b => b.Url)
        .ToList();
}
##### Saving Data Example:
using (var db = new BloggingContext())
{
    var blog = new Blog { Url = "http://sample.com" };
    db.Blogs.Add(blog);
    db.SaveChanges();
}

### Data Seeding

##### It's the process of populating a database with an initial set of data.
##### EF Core Migrations can automatically compute what insert, update or delete operations need to be applied when upgrading the database to a new version of the model.
##### Example:
modelBuilder.Entity<Blog>().HasData(new Blog {BlogId = 1, Url = "http://sample.com"});
modelBuilder.Entity<Post>().HasData(
    new Post() { BlogId = 1, PostId = 1, Title = "First post", Content = "Test 1" });
modelBuilder.Entity<Post>().HasData(
    new { BlogId = 1, PostId = 2, Title = "Second post", Content = "Test 2" });
    
##### Limitations: The primary key value needs to be specified even if it's usually generated by the database. It will be used to detect data changes between migrations.
Previously seeded data will be removed if the primary key is changed in any way.

### Razor Pages with Entity Framework Core in ASP.NET Core

##### See the example tutorial at : https://docs.microsoft.com/en-us/aspnet/core/data/ef-rp/intro?view=aspnetcore-2.1&tabs=visual-studio

### User Secrets

##### They are a secure way of storing private user information such as API keys, client secrets, and connection strings. 

##### Steps: Right click on your project, then Select “Manage User Secrets”

##### Example:
{
  "myBingAPIKey": "{VALUE}",
  "textAPIKey": "{VALUE}",
  "ConnectionStrings": {
    "AzureConnection": "{CONNECTION STRING HERE}"
}

##### Then open .csproj file, and Right click on your project and select “Edit xxx.csproj file” (the xxx will be the name of your project)

